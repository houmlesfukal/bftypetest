import{s as ce,n as Q,o as ve,r as me,b as K}from"../chunks/scheduler.e108d1fd.js";import{S as ge,i as be,s as P,e as X,c as M,a as N,f as _,g,m as G,h as b,j as w,n as R,y as Y,k as m,z as h,A as Z,B,o as z,C as ie}from"../chunks/index.13cae138.js";function q(c){return(c==null?void 0:c.length)!==void 0?c:Array.from(c)}function $(c,e,n){const t=c.slice();return t[37]=e[n],t}function ee(c,e,n){const t=c.slice();return t[40]=e[n],t}function te(c){let e,n,t,l,s,o,r=c[4],i,v,p,y="reset",E,C,d=le(c);return{c(){e=g("div"),n=g("input"),t=P(),l=g("div"),s=G(c[1]),o=P(),d.c(),i=P(),v=g("div"),p=g("button"),p.textContent=y,this.h()},l(u){e=b(u,"DIV",{class:!0,"data-game":!0});var f=w(e);n=b(f,"INPUT",{class:!0,type:!0}),t=M(f),l=b(f,"DIV",{class:!0});var D=w(l);s=R(D,c[1]),D.forEach(_),o=M(f),d.l(f),i=M(f),v=b(f,"DIV",{class:!0});var T=w(v);p=b(T,"BUTTON",{"aria-label":!0,"data-svelte-h":!0}),Y(p)!=="svelte-iepo4c"&&(p.textContent=y),T.forEach(_),f.forEach(_),this.h()},h(){m(n,"class","input svelte-1y9o4x6"),m(n,"type","text"),m(l,"class","time svelte-1y9o4x6"),m(p,"aria-label","reset"),m(v,"class","reset svelte-1y9o4x6"),m(e,"class","game svelte-1y9o4x6"),m(e,"data-game",c[0])},m(u,f){N(u,e,f),h(e,n),c[13](n),Z(n,c[2]),h(e,t),h(e,l),h(l,s),h(e,o),d.m(e,null),h(e,i),h(e,v),h(v,p),E||(C=[B(n,"input",c[14]),B(n,"input",c[11]),B(n,"keydown",c[12]),B(p,"click",c[10])],E=!0)},p(u,f){f[0]&4&&n.value!==u[2]&&Z(n,u[2]),f[0]&2&&z(s,u[1]),f[0]&16&&ce(r,r=u[4])?(d.d(1),d=le(u),d.c(),d.m(e,i)):d.p(u,f),f[0]&1&&m(e,"data-game",u[0])},d(u){u&&_(e),c[13](null),d.d(u),E=!1,me(C)}}}function ne(c){let e,n=c[40]+"",t;return{c(){e=g("span"),t=G(n),this.h()},l(l){e=b(l,"SPAN",{class:!0});var s=w(e);t=R(s,n),s.forEach(_),this.h()},h(){m(e,"class","letter svelte-1y9o4x6")},m(l,s){N(l,e,s),h(e,t)},p(l,s){s[0]&8&&n!==(n=l[40]+"")&&z(t,n)},d(l){l&&_(e)}}}function se(c){let e,n=q(c[37]),t=[];for(let l=0;l<n.length;l+=1)t[l]=ne(ee(c,n,l));return{c(){e=g("span");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=b(l,"SPAN",{class:!0});var s=w(e);for(let o=0;o<t.length;o+=1)t[o].l(s);s.forEach(_),this.h()},h(){m(e,"class","word svelte-1y9o4x6")},m(l,s){N(l,e,s);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(l,s){if(s[0]&8){n=q(l[37]);let o;for(o=0;o<n.length;o+=1){const r=ee(l,n,o);t[o]?t[o].p(r,s):(t[o]=ne(r),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=n.length}},d(l){l&&_(e),ie(t,l)}}}function le(c){let e,n,t,l=q(c[3]),s=[];for(let o=0;o<l.length;o+=1)s[o]=se($(c,l,o));return{c(){e=g("div");for(let o=0;o<s.length;o+=1)s[o].c();n=P(),t=g("div"),this.h()},l(o){e=b(o,"DIV",{class:!0});var r=w(e);for(let i=0;i<s.length;i+=1)s[i].l(r);n=M(r),t=b(r,"DIV",{class:!0}),w(t).forEach(_),r.forEach(_),this.h()},h(){m(t,"class","caret svelte-1y9o4x6"),m(e,"class","words svelte-1y9o4x6")},m(o,r){N(o,e,r);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);h(e,n),h(e,t),c[15](t),c[16](e)},p(o,r){if(r[0]&8){l=q(o[3]);let i;for(i=0;i<l.length;i+=1){const v=$(o,l,i);s[i]?s[i].p(v,r):(s[i]=se(v),s[i].c(),s[i].m(e,n))}for(;i<s.length;i+=1)s[i].d(1);s.length=l.length}},d(o){o&&_(e),ie(s,o),c[15](null),c[16](null)}}}function oe(c){let e,n,t,l="WPM",s,o,r=Math.trunc(c[5])+"",i,v,p,y,E="Přesnost",C,d,u=Math.trunc(c[6])+"",f,D,T,I,j="Psát znovu",x,O;return{c(){e=g("div"),n=g("div"),t=g("p"),t.textContent=l,s=P(),o=g("p"),i=G(r),v=P(),p=g("div"),y=g("p"),y.textContent=E,C=P(),d=g("p"),f=G(u),D=G("%"),T=P(),I=g("button"),I.textContent=j,this.h()},l(L){e=b(L,"DIV",{class:!0});var k=w(e);n=b(k,"DIV",{});var S=w(n);t=b(S,"P",{class:!0,"data-svelte-h":!0}),Y(t)!=="svelte-ci3cah"&&(t.textContent=l),s=M(S),o=b(S,"P",{class:!0});var U=w(o);i=R(U,r),U.forEach(_),S.forEach(_),v=M(k),p=b(k,"DIV",{});var W=w(p);y=b(W,"P",{class:!0,"data-svelte-h":!0}),Y(y)!=="svelte-1j4s4s6"&&(y.textContent=E),C=M(W),d=b(W,"P",{class:!0});var A=w(d);f=R(A,u),D=R(A,"%"),A.forEach(_),W.forEach(_),T=M(k),I=b(k,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(I)!=="svelte-1fbu96i"&&(I.textContent=j),k.forEach(_),this.h()},h(){m(t,"class","title svelte-1y9o4x6"),m(o,"class","score svelte-1y9o4x6"),m(y,"class","title svelte-1y9o4x6"),m(d,"class","score svelte-1y9o4x6"),m(I,"class","play svelte-1y9o4x6"),m(e,"class","results svelte-1y9o4x6")},m(L,k){N(L,e,k),h(e,n),h(n,t),h(n,s),h(n,o),h(o,i),h(e,v),h(e,p),h(p,y),h(p,C),h(p,d),h(d,f),h(d,D),h(e,T),h(e,I),x||(O=B(I,"click",c[10]),x=!0)},p(L,k){k[0]&32&&r!==(r=Math.trunc(L[5])+"")&&z(i,r),k[0]&64&&u!==(u=Math.trunc(L[6])+"")&&z(f,u)},d(L){L&&_(e),x=!1,O()}}}function ye(c){let e,n,t=c[0]!=="konec"&&te(c),l=c[0]==="konec"&&oe(c);return{c(){t&&t.c(),e=P(),l&&l.c(),n=X()},l(s){t&&t.l(s),e=M(s),l&&l.l(s),n=X()},m(s,o){t&&t.m(s,o),N(s,e,o),l&&l.m(s,o),N(s,n,o)},p(s,o){s[0]!=="konec"?t?t.p(s,o):(t=te(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null),s[0]==="konec"?l?l.p(s,o):(l=oe(s),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:Q,o:Q,d(s){s&&(_(e),_(n)),t&&t.d(s),l&&l.d(s)}}}function ke(c){return c.reduce((e,n)=>e+n.length,0)}function Ce(c,e,n){let t="cekani na input",l=30,s="",o=[],r=0,i=0,v=0,p=!1,y=0,E=0,C,d,u,f;function D(){n(4,p=!p),F("cekani na input"),J(100),n(1,l=30),n(2,s=""),r=0,i=0,v=0,n(5,y=0),n(6,E=0)}function T(){return Math.floor(v/5/.5)}function I(){const a=ke(o);return Math.floor(v/a*100)}function j(){n(5,y=T()),n(6,E=I())}function x(){O(),L(),S(),W(),A(),H()}function O(){i>o[r].length-1||(d=C.children[r].children[i])}function L(){const a=o[r][i];s===a&&(d.dataset.letter="spravne",k()),s!==a&&(d.dataset.letter="spatne")}function k(){v+=1}function S(){i+=1}function U(){const a=i!==0,V=o[r].length===1;(a||V)&&(r+=1,i=0,k(),H())}function W(){const a=C.children[r],V=C.getBoundingClientRect().y;a.getBoundingClientRect().y>V&&a.scrollIntoView({block:"center"})}function A(){n(2,s="")}function H(){n(9,f.style.top=`${d.offsetTop+4}px`,f),n(9,f.style.left=`${d.offsetLeft+d.offsetWidth}px`,f)}function ae(){F("probiha"),re()}function re(){function a(){l>0&&n(1,l-=1),(t==="cekani na input"||l===0)&&clearInterval(V),l===0&&(F("konec"),j())}const V=setInterval(a,1e3)}async function J(a){const V=await fetch(`/api/words?limit=${a}`);n(3,o=await V.json())}function fe(){u.focus()}function F(a){n(0,t=a)}function ue(a){a.code=="Space"&&(a.preventDefault(),t==="probiha"&&U()),t==="cekani na input"&&ae()}ve(async()=>{J(100),fe()});function he(a){K[a?"unshift":"push"](()=>{u=a,n(8,u)})}function de(){s=this.value,n(2,s)}function pe(a){K[a?"unshift":"push"](()=>{f=a,n(9,f)})}function _e(a){K[a?"unshift":"push"](()=>{C=a,n(7,C)})}return[t,l,s,o,p,y,E,C,u,f,D,x,ue,he,de,pe,_e]}class Le extends ge{constructor(e){super(),be(this,e,Ce,ye,ce,{},null,[-1,-1])}}export{Le as component};
